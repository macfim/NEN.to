import{L,r as S,z as k,v as F,j as e,B as j,m as q,E as l,d as t,S as B,I as D,T as m,a9 as I,aa as T}from"./index.f5ee8b1a.js";import{a as H,F as p,b as h,I as g}from"./useMutation.esm.23c1ed56.js";import{B as f}from"./index.esm.fc077bd7.js";import"./utils.esm.c854b4f2.js";const R=async r=>(await L.post("/login",r)).data,v={username:"",password:""},W=({setToken:r,setUserUsername:c})=>{const[o,u]=S.exports.useState(v),b=k(),i=F(),{mutate:C,isLoading:w}=H({mutationFn:R,onSuccess:a=>{r(a.token),c(a.username),i({title:"Account Logged.",description:`Welcome back "${a.username}"`,status:"success",duration:9e3,isClosable:!0,position:"top-left"}),b("/"),u(v)},onError:a=>{const s={title:"Something Wrong",status:"error",duration:9e3,isClosable:!0,position:"top-left"};if(a.response.data.error)return i({...s,description:a.response.data.error});i({...s,description:a.message})}}),x=a=>{a.preventDefault();const{username:s,password:n}=o;if(!s||!n)return alert("username or/and password are blank");C({username:s,password:n})},d=a=>{const s=a.target.name,n=a.target.value;u(y=>({...y,[s]:n}))};return e(j,{as:q.div,initial:{opacity:0},animate:{opacity:1},minH:"100vh",children:e("form",{onSubmit:x,children:e(l,{px:"1rem",py:"1.5rem",w:"23rem",children:t(B,{spacing:"1rem",children:[t(l,{pb:"1rem",children:[e(D,{as:"h2",size:"lg",children:"Here you can Login"}),e(m,{children:"Let's join us"})]}),t(p,{isRequired:!0,children:[e(h,{children:"Username"}),e(g,{name:"username",value:o.username,onChange:d,required:!0,autoFocus:!0})]}),t(p,{isRequired:!0,children:[e(h,{children:"Password"}),e(g,{name:"password",type:"password",value:o.password,onChange:d,required:!0})]}),e(f,{type:"submit",colorScheme:"linkedin",isLoading:w,loadingText:"logging...",children:"LOGIN"}),e(I,{}),t(m,{children:[e("span",{style:{opacity:"0.5"},children:"Don't have an account ?"})," ",e(f,{colorScheme:"linkedin",variant:"link",children:e(T,{to:"/auth/register",children:"Register"})})]})]})})})})};export{W as default};
