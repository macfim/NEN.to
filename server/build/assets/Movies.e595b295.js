import{r as o,b as u,k as w,f as P,q as N,o as $,R as B,j as r,m as i,a0 as E,a1 as M,d as c,F as S,$ as j,S as D,A as G}from"./index.be792388.js";import{A as O,b as C,a as _,d,B as I,D as y,F as T,T as b,G as q}from"./utils.esm.a563d97b.js";import{I as z,g as L}from"./movies.4e0476f0.js";import{u as W}from"./useQuery.esm.f9d9c947.js";function U(e){const t=o.exports.useRef();return o.exports.useEffect(()=>{t.current=e},[e]),t.current}var V=(...e)=>e.filter(Boolean).join(" "),H=u("div",{baseStyle:{boxShadow:"none",backgroundClip:"padding-box",cursor:"default",color:"transparent",pointerEvents:"none",userSelect:"none","&::before, &::after, *":{visibility:"hidden"}}}),K=()=>{const e=o.exports.useRef(!0);return o.exports.useEffect(()=>{e.current=!1},[]),e.current},Q=w({from:{opacity:0},to:{opacity:1}}),v="var(--skeleton-start-color)",k="var(--skeleton-end-color)",J=w({from:{borderColor:v,background:v},to:{borderColor:k,background:k}}),m=P((e,t)=>{const s=N("Skeleton",e),n=K(),{startColor:p,endColor:f,isLoaded:a,fadeDuration:h,speed:l,className:F,...g}=$(e),R=U(a),x=V("chakra-skeleton",F);if(a){const A=n||R?"none":`${Q} ${h}s`;return B.createElement(u.div,{ref:t,className:x,__css:{animation:A},...g})}return r(H,{ref:t,className:x,...g,__css:{...s,animation:`${l}s linear infinite alternate ${J}`}})});m.defaultProps={fadeDuration:.4,speed:.8};m.displayName="Skeleton";const X=u(i.div,{shouldForwardProp:e=>E(e)||M(e)}),Y=({movie:e})=>c(X,{as:i.div,initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:".5"},layout:!0,w:"full",pb:".5rem",px:".1rem",rounded:"md",borderBottomWidth:"2px",borderTopWidth:"1px",boxShadow:"md",children:[r(O,{ratio:2/3,children:r(z,{src:e.poster,alt:e.title,fallback:r(m,{}),rounded:"md"})}),r(C,{as:"h3",size:"md",textAlign:"center",py:"1rem",px:"1rem",style:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:`${e.title[0].toUpperCase()}${e.title.slice(1)}`}),r(_,{px:".5rem",columns:{0:1,1:1,2:2}[e.genres.length]||3,spacing:3,textAlign:"center",children:e.genres.length>0?c(S,{children:[e.genres.slice(0,2).map(t=>r(d,{children:t.title},t.id)),e.genres.length>2?r(d,{as:"button",variant:"outline",cursor:"pointer",children:"more..."}):null]}):r(d,{children:"no genres"})})]}),ae=()=>{const e=j().genre;let t;const{data:s,isSuccess:n,isLoading:p,isError:f}=W({queryKey:["movies"],queryFn:L,refetchOnReconnect:"always"});return e&&n?t=s.slice(0).filter(a=>!!a.genres.map(l=>l.title).includes(e)):t=s,c(I,{mb:"2rem",maxW:"90rem",mx:"auto",px:"2rem",children:[r(C,{as:"h2",size:"lg",children:"Movies"}),r(y,{my:"1rem"}),p?r(T,{w:"full",justify:"center",children:r(D,{size:"xl"})}):null,f?r(b,{mx:"auto",children:"failed"}):null,n&&t?r(q,{templateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gridAutoRows:"auto",w:"full",rowGap:"3rem",columnGap:"1rem",children:r(G,{children:t.length>0?r(S,{children:t.map(a=>r(Y,{movie:a},a.id))}):r(b,{as:i.p,initial:{scale:0},animate:{scale:1,transition:{delay:.2,duration:.3}},textAlign:"center",children:"NO MOVIES FOUND"})})}):null,r(y,{as:i.hr,layout:!0,my:"1rem"})]})};export{ae as default};
