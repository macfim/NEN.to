import{E as y,r as k,x as R,w as D,j as e,d as t,Z as E}from"./index.be792388.js";import{a as L,F as l,b as m,I as p}from"./useMutation.esm.9370beab.js";import{C as T,B as h,S as j,b as q,T as g,D as B}from"./utils.esm.a563d97b.js";import{B as f}from"./index.esm.0ba88288.js";const F=async n=>(await y.post("/users",n)).data,C={username:"",password:""},G=({setToken:n,setUserUsername:c})=>{const[o,u]=k.exports.useState(C),v=R(),i=D(),{mutate:b,isLoading:w,isError:H,error:I}=L({mutationFn:F,onSuccess:()=>{n(null),c(null),i({title:"Account Created.",description:"We've created your account for you.",status:"success",duration:9e3,isClosable:!0,position:"top-left"}),v("/auth/login"),u(C)},onError:r=>{const s={title:"Something Wrong",status:"error",duration:9e3,isClosable:!0,position:"top-left"};if(r.response.data.error)return i({...s,description:r.response.data.error});i({...s,description:r.message})}}),x=r=>{r.preventDefault();const{username:s,password:a}=o;if(!s||!a)return alert("username or/and password are blank");b({username:s,password:a})},d=r=>{const s=r.target.name,a=r.target.value;u(S=>({...S,[s]:a}))};return e(T,{minH:"100vh",children:e("form",{onSubmit:x,children:e(h,{px:"1rem",py:"1.5rem",w:"23rem",children:t(j,{spacing:"1rem",children:[t(h,{pb:"1rem",children:[e(q,{as:"h2",size:"lg",children:"Here you can Register"}),e(g,{children:"Let's join us"})]}),t(l,{isRequired:!0,children:[e(m,{children:"Username"}),e(p,{name:"username",value:o.username,onChange:d,required:!0})]}),t(l,{isRequired:!0,children:[e(m,{children:"Password"}),e(p,{name:"password",type:"password",value:o.password,onChange:d,required:!0})]}),e(f,{type:"submit",colorScheme:"linkedin",isLoading:w,loadingText:"registering...",children:"REGISTER"}),e(B,{}),t(g,{children:[e("span",{style:{opacity:"0.5"},children:"Don't have an account ?"})," ",e(f,{colorScheme:"linkedin",variant:"link",children:e(E,{to:"/auth/login",children:"Login"})})]})]})})})})};export{G as default};
