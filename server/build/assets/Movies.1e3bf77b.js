import{c as pe,a as $e,o as fe,n as ze,j as t,f as S,R as F,b,C as je,m as _,r as a,k as ve,y as Le,a0 as Ve,a1 as Ge,d as E,F as me,P as Ke,$ as Ue,S as se,A as We}from"./index.ea771f0f.js";import{m as B,A as qe,b as ge,a as Qe,e as $,S as Je,B as Xe,F as ae,D as ie,T as le,G as Ye}from"./utils.esm.8950bd2f.js";import{f as Ze,a as eo,b as oo,d as ro,c as to,h as no,l as so,i as W,I as ao,T as io,j as lo}from"./movies.8b726076.js";import{u as co}from"./useQuery.esm.07f8f127.js";function uo(e){return"current"in e}var he=()=>typeof window<"u";function po(){var o;const e=navigator.userAgentData;return(o=e==null?void 0:e.platform)!=null?o:navigator.platform}var fo=e=>he()&&e.test(navigator.vendor),vo=e=>he()&&e.test(po()),mo=()=>vo(/mac|iphone|ipad|ipod/i),go=()=>mo()&&fo(/apple/i);function ho(e){const{ref:o,elements:r,enabled:s}=e,i=()=>{var c;var l;return(c=(l=o.current)==null?void 0:l.ownerDocument)!=null?c:document};Ze(i,"pointerdown",l=>{if(!go()||!s)return;const c=l.target,P=(r!=null?r:[o]).some(u=>{const v=uo(u)?u.current:u;return(v==null?void 0:v.contains(c))||v===c});i().activeElement!==c&&P&&(l.preventDefault(),c.focus())})}var z=(...e)=>e.filter(Boolean).join(" ");function yo(e,...o){return Po(e)?e(...o):e}var Po=e=>typeof e=="function";function g(...e){return function(r){e.some(s=>(s==null||s(r),r==null?void 0:r.defaultPrevented))}}function xo(...e){return function(r){e.forEach(s=>{s==null||s(r)})}}var[bo,R]=pe({name:"PopoverContext",errorMessage:"usePopoverContext: `context` is undefined. Seems you forgot to wrap all popover components within `<Popover />`"}),[Co,j]=pe({name:"PopoverStylesContext",errorMessage:`usePopoverStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Popover />" `}),k={click:"click",hover:"hover"};function wo(e={}){const{closeOnBlur:o=!0,closeOnEsc:r=!0,initialFocusRef:s,id:i,returnFocusOnClose:l=!0,autoFocus:c=!0,arrowSize:f,arrowShadowColor:P,trigger:u=k.click,openDelay:v=200,closeDelay:C=200,isLazy:N,lazyBehavior:L="unmount",computePositionOnMount:we,...ke}=e,{isOpen:p,onClose:h,onOpen:V,onToggle:J}=eo(e),G=a.exports.useRef(null),A=a.exports.useRef(null),w=a.exports.useRef(null),T=a.exports.useRef(!1),X=a.exports.useRef(!1);p&&(X.current=!0);const[Y,Se]=a.exports.useState(!1),[Z,Re]=a.exports.useState(!1),Te=a.exports.useId(),Be=i!=null?i:Te,[ee,D,M,O]=["popover-trigger","popover-content","popover-header","popover-body"].map(n=>`${n}-${Be}`),{referenceRef:I,getArrowProps:Ee,getPopperProps:oe,getArrowInnerProps:_e,forceUpdate:Fe}=oo({...ke,enabled:p||!!we}),re=ro({isOpen:p,ref:w});ho({enabled:p,ref:A}),to(w,{focusRef:A,visible:p,shouldFocus:l&&u===k.click}),no(w,{focusRef:s,visible:p,shouldFocus:c&&u===k.click});const te=so({wasSelected:X.current,enabled:N,mode:L,isSelected:re.present}),Ne=a.exports.useCallback((n={},m=null)=>{const d={...n,style:{...n.style,transformOrigin:W.transformOrigin.varRef,[W.arrowSize.var]:f?`${f}px`:void 0,[W.arrowShadowColor.var]:P},ref:B(w,m),children:te?n.children:null,id:D,tabIndex:-1,role:"dialog",onKeyDown:g(n.onKeyDown,y=>{r&&y.key==="Escape"&&h()}),onBlur:g(n.onBlur,y=>{const H=ce(y),U=q(w.current,H),He=q(A.current,H);p&&o&&(!U&&!He)&&h()}),"aria-labelledby":Y?M:void 0,"aria-describedby":Z?O:void 0};return u===k.hover&&(d.role="tooltip",d.onMouseEnter=g(n.onMouseEnter,()=>{T.current=!0}),d.onMouseLeave=g(n.onMouseLeave,y=>{y.nativeEvent.relatedTarget!==null&&(T.current=!1,setTimeout(()=>h(),C))})),d},[te,D,Y,M,Z,O,u,r,h,p,o,C,P,f]),Ae=a.exports.useCallback((n={},m=null)=>oe({...n,style:{visibility:p?"visible":"hidden",...n.style}},m),[p,oe]),De=a.exports.useCallback((n,m=null)=>({...n,ref:B(m,G,I)}),[G,I]),x=a.exports.useRef(),K=a.exports.useRef(),ne=a.exports.useCallback(n=>{G.current==null&&I(n)},[I]),Me=a.exports.useCallback((n={},m=null)=>{const d={...n,ref:B(A,m,ne),id:ee,"aria-haspopup":"dialog","aria-expanded":p,"aria-controls":D};return u===k.click&&(d.onClick=g(n.onClick,J)),u===k.hover&&(d.onFocus=g(n.onFocus,()=>{x.current===void 0&&V()}),d.onBlur=g(n.onBlur,y=>{const H=ce(y),U=!q(w.current,H);p&&o&&U&&h()}),d.onKeyDown=g(n.onKeyDown,y=>{y.key==="Escape"&&h()}),d.onMouseEnter=g(n.onMouseEnter,()=>{T.current=!0,x.current=window.setTimeout(()=>V(),v)}),d.onMouseLeave=g(n.onMouseLeave,()=>{T.current=!1,x.current&&(clearTimeout(x.current),x.current=void 0),K.current=window.setTimeout(()=>{T.current===!1&&h()},C)})),d},[ee,p,D,u,ne,J,V,o,h,v,C]);a.exports.useEffect(()=>()=>{x.current&&clearTimeout(x.current),K.current&&clearTimeout(K.current)},[]);const Oe=a.exports.useCallback((n={},m=null)=>({...n,id:M,ref:B(m,d=>{Se(!!d)})}),[M]),Ie=a.exports.useCallback((n={},m=null)=>({...n,id:O,ref:B(m,d=>{Re(!!d)})}),[O]);return{forceUpdate:Fe,isOpen:p,onAnimationComplete:re.onComplete,onClose:h,getAnchorProps:De,getArrowProps:Ee,getArrowInnerProps:_e,getPopoverPositionerProps:Ae,getPopoverProps:Ne,getTriggerProps:Me,getHeaderProps:Oe,getBodyProps:Ie}}function q(e,o){return e===o||(e==null?void 0:e.contains(o))}function ce(e){var r;const o=e.currentTarget.ownerDocument.activeElement;return(r=e.relatedTarget)!=null?r:o}function ye(e){const o=$e("Popover",e),{children:r,...s}=fe(e),i=ze(),l=wo({...s,direction:i.direction});return t(bo,{value:l,children:t(Co,{value:o,children:yo(r,{isOpen:l.isOpen,onClose:l.onClose,forceUpdate:l.forceUpdate})})})}ye.displayName="Popover";var Pe=S(function(o,r){const{getBodyProps:s}=R(),i=j();return F.createElement(b.div,{...s(o,r),className:z("chakra-popover__body",o.className),__css:i.body})});Pe.displayName="PopoverBody";var ko=S(function(o,r){const{onClose:s}=R(),i=j();return t(je,{size:"sm",onClick:s,className:z("chakra-popover__close-btn",o.className),__css:i.closeButton,ref:r,...o})});ko.displayName="PopoverCloseButton";function So(e){if(!!e)return{enter:{...e.enter,visibility:"visible"},exit:{...e.exit,transitionEnd:{visibility:"hidden"}}}}var Ro={exit:{opacity:0,scale:.95,transition:{duration:.1,ease:[.4,0,1,1]}},enter:{scale:1,opacity:1,transition:{duration:.15,ease:[0,0,.2,1]}}},To=b(_.section),xe=S(function(o,r){const{variants:s=Ro,...i}=o,{isOpen:l}=R();return F.createElement(To,{ref:r,variants:So(s),initial:!1,animate:l?"enter":"exit",...i})});xe.displayName="PopoverTransition";var be=S(function(o,r){const{rootProps:s,motionProps:i,...l}=o,{getPopoverProps:c,getPopoverPositionerProps:f,onAnimationComplete:P}=R(),u=j(),v={position:"relative",display:"flex",flexDirection:"column",...u.content};return F.createElement(b.div,{...f(s),__css:u.popper,className:"chakra-popover__popper"},t(xe,{...i,...c(l,r),onAnimationComplete:xo(P,l.onAnimationComplete),className:z("chakra-popover__content",o.className),__css:v}))});be.displayName="PopoverContent";var Bo=S(function(o,r){const{getHeaderProps:s}=R(),i=j();return F.createElement(b.header,{...s(o,r),className:z("chakra-popover__header",o.className),__css:i.header})});Bo.displayName="PopoverHeader";function Ce(e){const o=a.exports.Children.only(e.children),{getTriggerProps:r}=R();return a.exports.cloneElement(o,r(o.props,o.ref))}Ce.displayName="PopoverTrigger";function Eo(e){const o=a.exports.useRef();return a.exports.useEffect(()=>{o.current=e},[e]),o.current}var _o=(...e)=>e.filter(Boolean).join(" "),Fo=b("div",{baseStyle:{boxShadow:"none",backgroundClip:"padding-box",cursor:"default",color:"transparent",pointerEvents:"none",userSelect:"none","&::before, &::after, *":{visibility:"hidden"}}}),No=()=>{const e=a.exports.useRef(!0);return a.exports.useEffect(()=>{e.current=!1},[]),e.current},Ao=ve({from:{opacity:0},to:{opacity:1}}),ue="var(--skeleton-start-color)",de="var(--skeleton-end-color)",Do=ve({from:{borderColor:ue,background:ue},to:{borderColor:de,background:de}}),Q=S((e,o)=>{const r=Le("Skeleton",e),s=No(),{startColor:i,endColor:l,isLoaded:c,fadeDuration:f,speed:P,className:u,...v}=fe(e),C=Eo(c),N=_o("chakra-skeleton",u);if(c){const L=s||C?"none":`${Ao} ${f}s`;return F.createElement(b.div,{ref:o,className:N,__css:{animation:L},...v})}return t(Fo,{ref:o,className:N,...v,__css:{...r,animation:`${P}s linear infinite alternate ${Do}`}})});Q.defaultProps={fadeDuration:.4,speed:.8};Q.displayName="Skeleton";const Mo=b(_.div,{shouldForwardProp:e=>Ve(e)||Ge(e)}),Oo=({movie:e})=>E(Mo,{as:_.div,initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:".5"},layout:!0,w:"full",pb:".5rem",px:".1rem",rounded:"md",borderBottomWidth:"2px",borderTopWidth:"1px",boxShadow:"md",children:[t(qe,{ratio:2/3,children:t(ao,{src:e.poster,alt:e.title,fallback:t(Q,{}),rounded:"md"})}),t(ge,{as:"h3",size:"md",textAlign:"center",py:"1rem",px:"1rem",style:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:`${e.title[0].toUpperCase()}${e.title.slice(1)}`}),t(Qe,{px:".5rem",columns:{0:1,1:1,2:2}[e.genres.length]||3,spacing:3,textAlign:"center",children:e.genres.length>0?E(me,{children:[e.genres.slice(0,2).map(o=>t(io,{label:o.title,children:t($,{style:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",cursor:"default"},children:o.title})},o.id)),e.genres.length>2?E(ye,{children:[t(Ce,{children:t($,{as:"button",variant:"outline",cursor:"pointer",children:"more..."})}),t(Ke,{children:t(be,{w:"auto",children:t(Pe,{children:t(Je,{textAlign:"center",children:e.genres.slice(2).map(o=>t($,{children:o.title},o.id))})})})})]}):null]}):t($,{children:"no genres"})})]}),Lo=()=>{const e=Ue().genre,{data:o,isSuccess:r,isLoading:s,isRefetching:i,isError:l,refetch:c}=co({queryKey:["movies"],queryFn:()=>lo(e)});return a.exports.useEffect(()=>{c()},[e]),E(Xe,{mb:"2rem",maxW:"90rem",mx:"auto",px:"2rem",children:[E(ae,{justify:"space-between",align:"center",children:[t(ge,{as:"h2",size:"lg",children:"Movies"}),i?t(se,{size:"sm"}):null]}),t(ie,{my:"1rem"}),s?t(ae,{w:"full",justify:"center",children:t(se,{size:"xl"})}):null,l?t(le,{mx:"auto",children:"failed"}):null,r?t(Ye,{templateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gridAutoRows:"auto",w:"full",rowGap:"3rem",columnGap:"1rem",children:t(We,{children:o.length>0?t(me,{children:o.map(f=>t(Oo,{movie:f},f.id))}):t(le,{as:_.p,initial:{scale:0},animate:{scale:1,transition:{delay:.2,duration:.3}},textAlign:"center",children:"NO MOVIES FOUND"})})}):null,t(ie,{as:_.hr,layout:!0,my:"1rem"})]})};export{Lo as default};
