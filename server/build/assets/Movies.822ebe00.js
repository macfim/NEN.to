import{c as ue,a as Ie,o as de,n as He,j as t,f as S,R as _,b,C as $e,m as E,r as a,k as pe,y as ze,a0 as Le,a1 as je,d as $,F as fe,P as Ve,$ as Ge,S as Ke,A as Ue}from"./index.7d06180d.js";import{m as B,A as We,b as ve,a as qe,e as H,S as Qe,B as Je,D as se,F as Xe,T as ae,G as Ye}from"./utils.esm.aa91f8a2.js";import{f as Ze,a as eo,b as oo,d as ro,c as to,h as no,l as so,i as W,I as ao,T as io,j as lo}from"./movies.b80386a5.js";import{u as co}from"./useQuery.esm.84553ea2.js";function uo(e){return"current"in e}var me=()=>typeof window<"u";function po(){var o;const e=navigator.userAgentData;return(o=e==null?void 0:e.platform)!=null?o:navigator.platform}var fo=e=>me()&&e.test(navigator.vendor),vo=e=>me()&&e.test(po()),mo=()=>vo(/mac|iphone|ipad|ipod/i),go=()=>mo()&&fo(/apple/i);function ho(e){const{ref:o,elements:r,enabled:s}=e,i=()=>{var c;var l;return(c=(l=o.current)==null?void 0:l.ownerDocument)!=null?c:document};Ze(i,"pointerdown",l=>{if(!go()||!s)return;const c=l.target,P=(r!=null?r:[o]).some(u=>{const f=uo(u)?u.current:u;return(f==null?void 0:f.contains(c))||f===c});i().activeElement!==c&&P&&(l.preventDefault(),c.focus())})}var z=(...e)=>e.filter(Boolean).join(" ");function yo(e,...o){return Po(e)?e(...o):e}var Po=e=>typeof e=="function";function m(...e){return function(r){e.some(s=>(s==null||s(r),r==null?void 0:r.defaultPrevented))}}function xo(...e){return function(r){e.forEach(s=>{s==null||s(r)})}}var[bo,R]=ue({name:"PopoverContext",errorMessage:"usePopoverContext: `context` is undefined. Seems you forgot to wrap all popover components within `<Popover />`"}),[Co,L]=ue({name:"PopoverStylesContext",errorMessage:`usePopoverStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Popover />" `}),k={click:"click",hover:"hover"};function wo(e={}){const{closeOnBlur:o=!0,closeOnEsc:r=!0,initialFocusRef:s,id:i,returnFocusOnClose:l=!0,autoFocus:c=!0,arrowSize:y,arrowShadowColor:P,trigger:u=k.click,openDelay:f=200,closeDelay:C=200,isLazy:F,lazyBehavior:j="unmount",computePositionOnMount:be,...Ce}=e,{isOpen:p,onClose:g,onOpen:V,onToggle:J}=eo(e),G=a.exports.useRef(null),N=a.exports.useRef(null),w=a.exports.useRef(null),T=a.exports.useRef(!1),X=a.exports.useRef(!1);p&&(X.current=!0);const[Y,we]=a.exports.useState(!1),[Z,ke]=a.exports.useState(!1),Se=a.exports.useId(),Re=i!=null?i:Se,[ee,A,D,M]=["popover-trigger","popover-content","popover-header","popover-body"].map(n=>`${n}-${Re}`),{referenceRef:O,getArrowProps:Te,getPopperProps:oe,getArrowInnerProps:Be,forceUpdate:Ee}=oo({...Ce,enabled:p||!!be}),re=ro({isOpen:p,ref:w});ho({enabled:p,ref:N}),to(w,{focusRef:N,visible:p,shouldFocus:l&&u===k.click}),no(w,{focusRef:s,visible:p,shouldFocus:c&&u===k.click});const te=so({wasSelected:X.current,enabled:F,mode:j,isSelected:re.present}),_e=a.exports.useCallback((n={},v=null)=>{const d={...n,style:{...n.style,transformOrigin:W.transformOrigin.varRef,[W.arrowSize.var]:y?`${y}px`:void 0,[W.arrowShadowColor.var]:P},ref:B(w,v),children:te?n.children:null,id:A,tabIndex:-1,role:"dialog",onKeyDown:m(n.onKeyDown,h=>{r&&h.key==="Escape"&&g()}),onBlur:m(n.onBlur,h=>{const I=ie(h),U=q(w.current,I),Oe=q(N.current,I);p&&o&&(!U&&!Oe)&&g()}),"aria-labelledby":Y?D:void 0,"aria-describedby":Z?M:void 0};return u===k.hover&&(d.role="tooltip",d.onMouseEnter=m(n.onMouseEnter,()=>{T.current=!0}),d.onMouseLeave=m(n.onMouseLeave,h=>{h.nativeEvent.relatedTarget!==null&&(T.current=!1,setTimeout(()=>g(),C))})),d},[te,A,Y,D,Z,M,u,r,g,p,o,C,P,y]),Fe=a.exports.useCallback((n={},v=null)=>oe({...n,style:{visibility:p?"visible":"hidden",...n.style}},v),[p,oe]),Ne=a.exports.useCallback((n,v=null)=>({...n,ref:B(v,G,O)}),[G,O]),x=a.exports.useRef(),K=a.exports.useRef(),ne=a.exports.useCallback(n=>{G.current==null&&O(n)},[O]),Ae=a.exports.useCallback((n={},v=null)=>{const d={...n,ref:B(N,v,ne),id:ee,"aria-haspopup":"dialog","aria-expanded":p,"aria-controls":A};return u===k.click&&(d.onClick=m(n.onClick,J)),u===k.hover&&(d.onFocus=m(n.onFocus,()=>{x.current===void 0&&V()}),d.onBlur=m(n.onBlur,h=>{const I=ie(h),U=!q(w.current,I);p&&o&&U&&g()}),d.onKeyDown=m(n.onKeyDown,h=>{h.key==="Escape"&&g()}),d.onMouseEnter=m(n.onMouseEnter,()=>{T.current=!0,x.current=window.setTimeout(()=>V(),f)}),d.onMouseLeave=m(n.onMouseLeave,()=>{T.current=!1,x.current&&(clearTimeout(x.current),x.current=void 0),K.current=window.setTimeout(()=>{T.current===!1&&g()},C)})),d},[ee,p,A,u,ne,J,V,o,g,f,C]);a.exports.useEffect(()=>()=>{x.current&&clearTimeout(x.current),K.current&&clearTimeout(K.current)},[]);const De=a.exports.useCallback((n={},v=null)=>({...n,id:D,ref:B(v,d=>{we(!!d)})}),[D]),Me=a.exports.useCallback((n={},v=null)=>({...n,id:M,ref:B(v,d=>{ke(!!d)})}),[M]);return{forceUpdate:Ee,isOpen:p,onAnimationComplete:re.onComplete,onClose:g,getAnchorProps:Ne,getArrowProps:Te,getArrowInnerProps:Be,getPopoverPositionerProps:Fe,getPopoverProps:_e,getTriggerProps:Ae,getHeaderProps:De,getBodyProps:Me}}function q(e,o){return e===o||(e==null?void 0:e.contains(o))}function ie(e){var r;const o=e.currentTarget.ownerDocument.activeElement;return(r=e.relatedTarget)!=null?r:o}function ge(e){const o=Ie("Popover",e),{children:r,...s}=de(e),i=He(),l=wo({...s,direction:i.direction});return t(bo,{value:l,children:t(Co,{value:o,children:yo(r,{isOpen:l.isOpen,onClose:l.onClose,forceUpdate:l.forceUpdate})})})}ge.displayName="Popover";var he=S(function(o,r){const{getBodyProps:s}=R(),i=L();return _.createElement(b.div,{...s(o,r),className:z("chakra-popover__body",o.className),__css:i.body})});he.displayName="PopoverBody";var ko=S(function(o,r){const{onClose:s}=R(),i=L();return t($e,{size:"sm",onClick:s,className:z("chakra-popover__close-btn",o.className),__css:i.closeButton,ref:r,...o})});ko.displayName="PopoverCloseButton";function So(e){if(!!e)return{enter:{...e.enter,visibility:"visible"},exit:{...e.exit,transitionEnd:{visibility:"hidden"}}}}var Ro={exit:{opacity:0,scale:.95,transition:{duration:.1,ease:[.4,0,1,1]}},enter:{scale:1,opacity:1,transition:{duration:.15,ease:[0,0,.2,1]}}},To=b(E.section),ye=S(function(o,r){const{variants:s=Ro,...i}=o,{isOpen:l}=R();return _.createElement(To,{ref:r,variants:So(s),initial:!1,animate:l?"enter":"exit",...i})});ye.displayName="PopoverTransition";var Pe=S(function(o,r){const{rootProps:s,motionProps:i,...l}=o,{getPopoverProps:c,getPopoverPositionerProps:y,onAnimationComplete:P}=R(),u=L(),f={position:"relative",display:"flex",flexDirection:"column",...u.content};return _.createElement(b.div,{...y(s),__css:u.popper,className:"chakra-popover__popper"},t(ye,{...i,...c(l,r),onAnimationComplete:xo(P,l.onAnimationComplete),className:z("chakra-popover__content",o.className),__css:f}))});Pe.displayName="PopoverContent";var Bo=S(function(o,r){const{getHeaderProps:s}=R(),i=L();return _.createElement(b.header,{...s(o,r),className:z("chakra-popover__header",o.className),__css:i.header})});Bo.displayName="PopoverHeader";function xe(e){const o=a.exports.Children.only(e.children),{getTriggerProps:r}=R();return a.exports.cloneElement(o,r(o.props,o.ref))}xe.displayName="PopoverTrigger";function Eo(e){const o=a.exports.useRef();return a.exports.useEffect(()=>{o.current=e},[e]),o.current}var _o=(...e)=>e.filter(Boolean).join(" "),Fo=b("div",{baseStyle:{boxShadow:"none",backgroundClip:"padding-box",cursor:"default",color:"transparent",pointerEvents:"none",userSelect:"none","&::before, &::after, *":{visibility:"hidden"}}}),No=()=>{const e=a.exports.useRef(!0);return a.exports.useEffect(()=>{e.current=!1},[]),e.current},Ao=pe({from:{opacity:0},to:{opacity:1}}),le="var(--skeleton-start-color)",ce="var(--skeleton-end-color)",Do=pe({from:{borderColor:le,background:le},to:{borderColor:ce,background:ce}}),Q=S((e,o)=>{const r=ze("Skeleton",e),s=No(),{startColor:i,endColor:l,isLoaded:c,fadeDuration:y,speed:P,className:u,...f}=de(e),C=Eo(c),F=_o("chakra-skeleton",u);if(c){const j=s||C?"none":`${Ao} ${y}s`;return _.createElement(b.div,{ref:o,className:F,__css:{animation:j},...f})}return t(Fo,{ref:o,className:F,...f,__css:{...r,animation:`${P}s linear infinite alternate ${Do}`}})});Q.defaultProps={fadeDuration:.4,speed:.8};Q.displayName="Skeleton";const Mo=b(E.div,{shouldForwardProp:e=>Le(e)||je(e)}),Oo=({movie:e})=>$(Mo,{as:E.div,initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:".5"},layout:!0,w:"full",pb:".5rem",px:".1rem",rounded:"md",borderBottomWidth:"2px",borderTopWidth:"1px",boxShadow:"md",children:[t(We,{ratio:2/3,children:t(ao,{src:e.poster,alt:e.title,fallback:t(Q,{}),rounded:"md"})}),t(ve,{as:"h3",size:"md",textAlign:"center",py:"1rem",px:"1rem",style:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:`${e.title[0].toUpperCase()}${e.title.slice(1)}`}),t(qe,{px:".5rem",columns:{0:1,1:1,2:2}[e.genres.length]||3,spacing:3,textAlign:"center",children:e.genres.length>0?$(fe,{children:[e.genres.slice(0,2).map(o=>t(io,{label:o.title,children:t(H,{style:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",cursor:"default"},children:o.title})},o.id)),e.genres.length>2?$(ge,{children:[t(xe,{children:t(H,{as:"button",variant:"outline",cursor:"pointer",children:"more..."})}),t(Ve,{children:t(Pe,{w:"auto",children:t(he,{children:t(Qe,{textAlign:"center",children:e.genres.slice(2).map(o=>t(H,{children:o.title},o.id))})})})})]}):null]}):t(H,{children:"no genres"})})]}),jo=()=>{const e=Ge().genre,{data:o,isSuccess:r,isLoading:s,isError:i,refetch:l}=co({queryKey:["movies"],queryFn:()=>lo(e)});return a.exports.useEffect(()=>{l()},[e]),$(Je,{mb:"2rem",maxW:"90rem",mx:"auto",px:"2rem",children:[t(ve,{as:"h2",size:"lg",children:"Movies"}),t(se,{my:"1rem"}),s?t(Xe,{w:"full",justify:"center",children:t(Ke,{size:"xl"})}):null,i?t(ae,{mx:"auto",children:"failed"}):null,r?t(Ye,{templateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gridAutoRows:"auto",w:"full",rowGap:"3rem",columnGap:"1rem",children:t(Ue,{children:o.length>0?t(fe,{children:o.map(c=>t(Oo,{movie:c},c.id))}):t(ae,{as:E.p,initial:{scale:0},animate:{scale:1,transition:{delay:.2,duration:.3}},textAlign:"center",children:"NO MOVIES FOUND"})})}):null,t(se,{as:E.hr,layout:!0,my:"1rem"})]})};export{jo as default};
